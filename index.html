<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TAU AFRICA INTERNATIONAL</title>
    
    <!-- EmailJS SDK -->
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #1e3c72, #2a5298, #87ceeb);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            background: linear-gradient(45deg, #000080, #4169e1, #87ceeb);
            color: white;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            position: relative;
            overflow: hidden;
        }

        .emancipation-scroll {
            position: absolute;
            bottom: 5px;
            left: 0;
            width: 100%;
            height: 20px;
            overflow: hidden;
            background: rgba(255, 215, 0, 0.2);
            border-radius: 10px;
        }

        .emancipation-text {
            display: inline-block;
            white-space: nowrap;
            font-size: 12px;
            font-weight: bold;
            color: #ffd700;
            animation: scrollText 15s linear infinite;
            line-height: 20px;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
        }

        @keyframes scrollText {
            0% { transform: translateX(100%); }
            100% { transform: translateX(-100%); }
        }

        .logo {
            width: 120px;
            height: 120px;
            background: radial-gradient(circle, #87ceeb, #4169e1);
            border-radius: 50%;
            margin: 0 auto 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: bold;
            border: 4px solid #ffd700;
        }

        .main-title {
            font-size: 2.8rem;
            font-weight: bold;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
            letter-spacing: 2px;
        }

        .vision {
            font-size: 1.2rem;
            font-style: italic;
            opacity: 0.9;
        }

        .social-links {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .social-link {
            display: inline-flex;
            align-items: center;
            padding: 8px 16px;
            background: rgba(255,255,255,0.2);
            border-radius: 20px;
            color: white;
            text-decoration: none;
            transition: all 0.3s ease;
            font-size: 14px;
        }

        .social-link:hover {
            background: rgba(255,255,255,0.3);
            transform: scale(1.05);
        }

        .wings-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 40px;
        }

        .wing {
            background: rgba(255,255,255,0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
        }

        .wing:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
        }

        .auffi {
            background: linear-gradient(135deg, #ff6b6b, #4ecdc4);
            color: white;
        }

        .valenta {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .wing-title {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 15px;
            text-align: center;
        }

        .wing-description {
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .houses-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }

        .house-btn, .corporate-btn {
            background: rgba(255,255,255,0.2);
            border: 2px solid rgba(255,255,255,0.3);
            color: white;
            padding: 15px;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            font-weight: bold;
        }

        .house-btn:hover, .corporate-btn:hover {
            background: rgba(255,255,255,0.3);
            transform: scale(1.05);
        }

        .galaxy-banner {
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            color: #333;
            padding: 10px;
            border-radius: 10px;
            text-align: center;
            font-weight: bold;
            margin-top: 15px;
        }

        .main-sections {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }

        .section {
            background: rgba(255,255,255,0.95);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
            transition: all 0.3s ease;
        }

        .section:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.2);
        }

        .section-title {
            font-size: 1.5rem;
            font-weight: bold;
            color: #2a5298;
            margin-bottom: 15px;
            text-align: center;
        }

        .btn {
            background: linear-gradient(45deg, #4169e1, #87ceeb);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            margin: 5px;
            display: inline-block;
            text-decoration: none;
        }

        .btn:hover {
            background: linear-gradient(45deg, #2a5298, #4169e1);
            transform: scale(1.05);
        }

        .btn-register {
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            font-size: 1.1rem;
            padding: 15px 30px;
        }

        .btn-kabiru {
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            color: #333;
            font-weight: bold;
            width: 100%;
            padding: 15px;
            margin-top: 20px;
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.7);
            overflow-y: auto;
        }

        .modal-content {
            background-color: white;
            margin: 2% auto;
            padding: 30px;
            border-radius: 20px;
            width: 90%;
            max-width: 600px;
            max-height: 95vh;
            overflow-y: auto;
            position: relative;
        }

        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            position: absolute;
            right: 20px;
            top: 15px;
        }

        .close:hover {
            color: #000;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #2a5298;
        }

        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 16px;
        }

        .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
            border-color: #4169e1;
            outline: none;
        }

        .payment-info {
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            text-align: center;
        }

        .level-selection {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }

        .level-btn {
            padding: 10px;
            border: 2px solid #4169e1;
            background: rgba(65, 105, 225, 0.1);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .level-btn.selected {
            background: #4169e1;
            color: white;
        }

        .kabiru-section {
            background: linear-gradient(135deg, #ffd700, #ffed4e);
            color: #333;
            text-align: center;
            padding: 30px;
            border-radius: 20px;
            margin-top: 30px;
        }

        .payment-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2000;
        }

        .payment-widget {
            background: white;
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            max-width: 400px;
            width: 90%;
        }

        .payment-input {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 10px;
            margin: 10px 0;
            font-size: 16px;
            text-align: center;
        }

        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #4169e1;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 20px;
            border-radius: 10px;
            color: white;
            font-weight: bold;
            z-index: 1001;
            display: none;
            max-width: 350px;
        }

        .success { background: #2ecc71; }
        .error { background: #e74c3c; }

        .floating-btn {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            background: linear-gradient(45deg, #4169e1, #87ceeb);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            transition: all 0.3s ease;
            z-index: 100;
        }

        .floating-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(0,0,0,0.4);
        }

        .ai-assistant {
            position: fixed;
            bottom: 100px;
            right: 30px;
            width: 60px;
            height: 60px;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            transition: all 0.3s ease;
            z-index: 100;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(255, 107, 107, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(255, 107, 107, 0); }
            100% { box-shadow: 0 0 0 0 rgba(255, 107, 107, 0); }
        }

        .ai-chat-window {
            position: fixed;
            bottom: 170px;
            right: 30px;
            width: 350px;
            height: 450px;
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            display: none;
            flex-direction: column;
            z-index: 200;
        }

        .ai-chat-header {
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            color: white;
            padding: 15px 20px;
            border-radius: 20px 20px 0 0;
            font-weight: bold;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .ai-chat-messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            max-height: 300px;
        }

        .ai-message {
            background: #f0f0f0;
            padding: 10px 15px;
            border-radius: 15px;
            margin: 10px 0;
            max-width: 80%;
        }

        .user-message {
            background: linear-gradient(45deg, #4169e1, #87ceeb);
            color: white;
            margin-left: auto;
        }

        .ai-chat-input {
            display: flex;
            padding: 15px;
            border-top: 1px solid #eee;
        }

        .ai-chat-input input {
            flex: 1;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 20px;
            outline: none;
        }

        .ai-chat-input button {
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 50%;
            margin-left: 10px;
            cursor: pointer;
        }

        .loading {
            opacity: 0.7;
            pointer-events: none;
        }

        .loading::after {
            content: "";
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid #f3f3f3;
            border-top: 2px solid #4169e1;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-left: 10px;
        }

        @media (max-width: 768px) {
            .wings-container {
                grid-template-columns: 1fr;
            }
            
            .main-title {
                font-size: 2rem;
            }
            
            .houses-grid {
                grid-template-columns: 1fr;
            }
            
            .ai-chat-window {
                width: 90%;
                right: 5%;
                left: 5%;
            }
            
            .social-links {
                gap: 10px;
            }
            
            .social-link {
                font-size: 12px;
                padding: 6px 12px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="logo">🌍 TAU</div>
            <h1 class="main-title">TAU AFRICA INTERNATIONAL</h1>
            <p class="vision">Community • Value • Corporate • Sovereignty</p>
            
            <!-- Social Media Links -->
            <div class="social-links">
                <a href="https://x.com/grouptauafrica?t=pFlJ-gky_A7Dp3e0lbZ5Sg&s=09" target="_blank" class="social-link">
                    🐦 Twitter/X
                </a>
                <a href="https://www.tiktok.com/@tau.africa.nairob?_t=ZM-8zwbvmFtmt2&_r=1" target="_blank" class="social-link">
                    🎵 TikTok
                </a>
                <a href="https://youtube.com/@tauafrica8922?si=wwgxc2AvYHYwsHTh" target="_blank" class="social-link">
                    📺 YouTube
                </a>
                <span class="social-link" style="opacity: 0.7;">
                    📘 Facebook (Coming Soon)
                </span>
            </div>
            
            <div class="emancipation-scroll">
                <div class="emancipation-text">EMANCIPATION PROCLAMATIONS • FREEDOM FOR ALL AFRICANS • UNITY IN DIVERSITY • ECONOMIC LIBERATION • SPIRITUAL AWAKENING • SOCIAL JUSTICE</div>
            </div>
        </div>

        <!-- Two Wings -->
        <div class="wings-container">
            <!-- AUFFI Wing -->
            <div class="wing auffi">
                <h2 class="wing-title">🌍 AUFFI</h2>
                <p class="wing-description">Africa Unity Freedom Fund Initiative - Pan African platform for uniting and awakening Africans socially and spiritually, a movement for returning Oloo/Adam back Home to Africa, bringing together the four parts of Oloo to rebuild Africa</p>
                
                <div class="houses-grid">
                    <div class="house-btn" onclick="showNotification('Rastafari house - join with Rasta Card!', 'success')">Rastafari [Roots&Culture]</div>
                    <div class="house-btn" onclick="showNotification('Legio Maria house - join with Legio Card!', 'success')">Legio Maria [African Spirituality]</div>
                    <div class="house-btn" onclick="showNotification('Yie Kuom Chier house - join with YKC Card!', 'success')">Yie Kuom Chier [Kikongo&Sulwe]</div>
                    <div class="house-btn" onclick="showNotification('4th Generation house - Gen Alpha, Gen z, Gen public!', 'success')">4th Generation [Civilization]</div>
                </div>
                
                <div class="galaxy-banner">
                    Auffi - Pan African Trust Graph<br>REPARTRIATION - RESURRECTION-RESTORATION - RECONNECTION (sovereignty)
                </div>
                
                <button class="btn" onclick="openModal('parSirai')">Par Sirai Center</button>
            </div>

            <!-- Valenta Wing -->
            <div class="wing valenta">
                <h2 class="wing-title">🏢 VALENTA</h2>
                <p class="wing-description">Value Enter Africa - Corporate Holding company, building Kabiru Digital currency, Kabiru digital ecosystem, empowering African communities through education - economic and social unity. come let us build our sovereignty with together, and make Africa great again</p>

                <div class="houses-grid">
                    <div class="corporate-btn" onclick="openModal('corporate')">Corporate Registration</div>
                    <div class="corporate-btn" onclick="openModal('trustGraph')">Trust Graph Ledger</div>
                    <div class="corporate-btn" onclick="openModal('foundation')">Foundation</div>
                    <div class="corporate-btn" onclick="openModal('holdings')">Company Holdings</div>
                </div>
            </div>
        </div>

        <!-- Main Sections -->
        <div class="main-sections">
            <!-- Membership Registration -->
            <div class="section">
                <h3 class="section-title">👥 MEMBERSHIP</h3>
                <p>Join our community through TASK & TALK teams</p>
                <button class="btn btn-register" onclick="openModal('taskRegistration')">Join TASK Team</button>
                <button class="btn btn-register" onclick="openModal('talkRegistration')">Join TALK Team</button>
                <p style="margin-top: 15px; font-weight: bold; color: #e74c3c;">TASK Fee: KSH 500 | TALK Fee: KSH 2,000</p>
            </div>

            <!-- Activity Area -->
            <div class="section">
                <h3 class="section-title">📚 ACTIVITIES</h3>
                <p>Training workshops, job creation & research services</p>
                <button class="btn" onclick="openModal('training')">Join Training</button>
                <button class="btn" onclick="openModal('workshop')">Host Workshop</button>
                <button class="btn" onclick="openModal('research')">Research Services</button>
                <button class="btn" onclick="openModal('jobCreation')">Job Creation Training</button>
            </div>

            <!-- Jobs Area -->
            <div class="section">
                <h3 class="section-title">💼 TASKS</h3>
                <p>Connect job seekers with verified opportunities</p>
                <button class="btn" onclick="openModal('insertJob')">Insert Available Job</button>
                <button class="btn" onclick="openModal('retrieveJob')">Search Jobs</button>
                <button class="btn" onclick="openModal('availableJobs')">Browse Available Jobs</button>
                <button class="btn" onclick="openModal('applyJob')">Apply for Jobs</button>
            </div>

            <!-- Community -->
            <div class="section">
                <h3 class="section-title">🤝 COMMUNITY</h3>
                <p>Community support programs</p>
                <button class="btn" onclick="openModal('community')">Join Programs</button>
                <div style="margin-top: 10px; font-size: 0.9rem;">
                    Agriculture • Climate • Environment<br>
                    Water & Sanitation • Education • Child Care
                </div>
            </div>

            <!-- Interactive Forum -->
            <div class="section">
                <h3 class="section-title">💬 MEMBER FORUM</h3>
                <p>Connect, share ideas, and collaborate with fellow members</p>
                <button class="btn" onclick="openModal('forum')">Access Forum</button>
                <div style="margin-top: 10px; font-size: 0.9rem;">
                    Discussions • Job Sharing • Training Materials<br>
                    Voice Calls • Messaging • Networking
                </div>
            </div>
        </div>

        <!-- Kabiru Mining Section -->
        <div class="kabiru-section">
            <h2>⚡ KABIRU MINING</h2>
            <p>Mine Kabiru coins by proving and validating real values</p>
            <button class="btn-kabiru" onclick="window.open('https://magero1985.github.io/Kabiru-Mining-Portal-/', '_blank')">Access Kabiru Mining App</button>
        </div>
    </div>

    <!-- Notification -->
    <div id="notification" class="notification"></div>

    <!-- Floating Member Access Button -->
    <div class="floating-btn" onclick="showMemberLogin()" title="Member Access">👤</div>

    <!-- AI Assistant -->
    <div class="ai-assistant" onclick="toggleAIChat()" title="AI Assistant - Get Help">🤖</div>

    <!-- AI Chat Window -->
    <div class="ai-chat-window" id="aiChatWindow">
        <div class="ai-chat-header">
            <span>TAU AI Assistant</span>
            <span onclick="toggleAIChat()" style="cursor: pointer;">✖</span>
        </div>
        <div class="ai-chat-messages" id="aiChatMessages">
            <div class="ai-message">
                Hello! I'm your TAU Africa AI assistant. I can help you with:
                <br>• Navigating the app
                <br>• Understanding registration process
                <br>• Payment procedures
                <br>• Technical support
                <br>• General questions about TAU Africa
                <br><br>How can I assist you today?
            </div>
        </div>
        <div class="ai-chat-input">
            <input type="text" id="aiChatInput" placeholder="Ask me anything..." onkeypress="handleAIChatKeyPress(event)">
            <button onclick="sendAIMessage()">➤</button>
        </div>
    </div>

    <script>
        // Initialize EmailJS
        emailjs.init({
            publicKey: "GhjI14eQVGgOli0j1",
        });

        // Global variables
        let currentModal = null;
        let selectedLevel = '';
        let selectedCategory = '';

        // Email service function
        function sendEmailToOrganization(content, subject = "TAU AFRICA FORM SUBMISSION", formData = {}) {
            const templateParams = {
                to_email: 'grouptauafrica@gmail.com',
                from_name: formData.fullName || formData.name || formData.contactName || 'TAU Africa User',
                from_email: formData.email || 'noreply@tauafrica.com',
                subject: subject,
                message: content,
                phone: formData.phone || 'Not provided',
                location: formData.location || formData.country || 'Not provided'
            };

            return emailjs.send('service_xfira7g', 'template_q2lu285', templateParams)
                .then(function(response) {
                    console.log('Email sent successfully:', response.status, response.text);
                    return true;
                }, function(error) {
                    console.log('Email failed:', error);
                    return false;
                });
        }

        // M-PESA Payment Integration
        function initiateMpesaPayment(amount, phoneNumber, formData, successCallback) {
            showPaymentModal(amount, phoneNumber, formData, successCallback);
        }

        function showPaymentModal(amount, phoneNumber, formData, successCallback) {
            const paymentModal = document.createElement('div');
            paymentModal.className = 'payment-modal';
            paymentModal.innerHTML = `
                <div class="payment-widget">
                    <h3>📱 M-PESA Payment</h3>
                    <div class="payment-step">
                        <h4>Amount: KSH ${amount}</h4>
                        <p>Phone: ${phoneNumber}</p>
                        <p style="color: #666; font-size: 0.9em;">A payment prompt will be sent to your phone</p>
                    </div>
                    <div id="paymentSteps">
                        <div style="margin: 20px 0; padding: 15px; background: #f0f8ff; border-radius: 10px;">
                            <p><strong>Payment Process:</strong></p>
                            <ol style="text-align: left; margin-top: 10px;">
                                <li>Check your phone for M-PESA prompt</li>
                                <li>Enter your M-PESA PIN</li>
                                <li>Confirm the payment</li>
                                <li>Wait for confirmation</li>
                            </ol>
                        </div>
                        <input type="text" class="payment-input" placeholder="Enter confirmation code (if received)" id="confirmationCode">
                        <button class="btn" onclick="simulatePayment('${amount}', '${phoneNumber}', ${JSON.stringify(formData).replace(/"/g, '&quot;')}, '${successCallback}')">Confirm Payment</button>
                    </div>
                    <button class="btn" style="background: #e74c3c; margin-top: 20px;" onclick="cancelPayment()">Cancel Payment</button>
                </div>
            `;
            document.body.appendChild(paymentModal);
        }

        function simulatePayment(amount, phoneNumber, formDataStr, successCallbackName) {
            const paymentModal = document.querySelector('.payment-modal');
            const confirmationCode = document.getElementById('confirmationCode').value;
            
            if (confirmationCode.length < 4) {
                showNotification('Please enter a valid confirmation code', 'error');
                return;
            }

            paymentModal.innerHTML = `
                <div class="payment-widget">
                    <h3>Processing Payment...</h3>
                    <div class="spinner"></div>
                    <p>Verifying M-PESA transaction</p>
                    <p style="font-size: 0.9em; color: #666;">Transaction ID: MPX${Date.now()}</p>
                </div>
            `;

            setTimeout(() => {
                if (Math.random() > 0.05) { // 95% success rate
                    paymentModal.remove();
                    
                    // Parse the formData string back to object
                    const formData = JSON.parse(formDataStr.replace(/&quot;/g, '"'));
                    
                    // Call the appropriate success callback
                    if (successCallbackName === 'processTaskSuccess') {
                        processTaskSuccess(formData);
                    } else if (successCallbackName === 'processTalkSuccess') {
                        processTalkSuccess(formData);
                    } else if (successCallbackName === 'processJobCreationSuccess') {
                        processJobCreationSuccess(formData);
                    }
                    
                    showNotification(`M-PESA payment of KSH ${amount} successful! Transaction ID: MPX${Date.now()}`, 'success');
                } else {
                    paymentModal.remove();
                    showNotification('Payment failed. Please try again or contact support.', 'error');
                }
            }, 3000);
        }

        function cancelPayment() {
            document.querySelector('.payment-modal')?.remove();
            showNotification('Payment cancelled', 'error');
        }

        // Notification system
        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            notification.innerHTML = message;
            notification.className = `notification ${type}`;
            notification.style.display = 'block';
            
            setTimeout(() => {
                notification.style.display = 'none';
            }, 6000);
        }

        // Modal management
        function openModal(type) {
            closeAllModals();
            
            const modalContent = getModalContent(type);
            const modal = document.createElement('div');
            modal.className = 'modal';
            modal.style.display = 'block';
            modal.innerHTML = modalContent;
            document.body.appendChild(modal);
            currentModal = modal;
        }

        function closeAllModals() {
            const modals = document.querySelectorAll('.modal, .payment-modal');
            modals.forEach(modal => modal.remove());
            currentModal = null;
        }

        // Selection functions
        function selectLevel(level) {
            const buttons = document.querySelectorAll('.level-btn');
            buttons.forEach(btn => btn.classList.remove('selected'));
            event.target.classList.add('selected');
            selectedLevel = level;
            const levelInput = document.getElementById('supportLevel');
            if (levelInput) levelInput.value = level;
            
            // Show enhanced requirements for middle level and above
            const enhanced = document.getElementById('enhancedRequirements');
            if (enhanced && (level === 'middle' || level === 'upper' || level === 'high' || level === 'top')) {
                enhanced.style.display = 'block';
            }
        }

        function selectCategory(category) {
            const buttons = document.querySelectorAll('.level-btn');
            buttons.forEach(btn => btn.classList.remove('selected'));
            event.target.classList.add('selected');
            selectedCategory = category;
            const categoryInput = document.getElementById('taskCategory');
            if (categoryInput) categoryInput.value = category;
        }

        // Get modal content based on type
        function getModalContent(type) {
            switch(type) {
                case 'taskRegistration':
                    return createTaskRegistrationModal();
                case 'talkRegistration':
                    return createTalkRegistrationModal();
                case 'corporate':
                    return createCorporateModal();
                case 'training':
                    return createTrainingModal();
                case 'workshop':
                    return createWorkshopModal();
                case 'research':
                    return createResearchModal();
                case 'jobCreation':
                    return createJobCreationModal();
                case 'insertJob':
                    return createInsertJobModal();
                case 'retrieveJob':
                    return createRetrieveJobModal();
                case 'availableJobs':
                    return createAvailableJobsModal();
                case 'applyJob':
                    return createApplyJobModal();
                case 'community':
                    return createCommunityModal();
                case 'parSirai':
                    return createParSiraiModal();
                case 'trustGraph':
                    return createTrustGraphModal();
                case 'foundation':
                    return createFoundationModal();
                case 'holdings':
                    return createHoldingsModal();
                case 'forum':
                    return createForumModal();
                default:
                    return '<div class="modal-content"><span class="close" onclick="closeAllModals()">&times;</span><h2>Feature Coming Soon</h2><p>This feature is under development.</p></div>';
            }
        }

        // COMPREHENSIVE TASK Registration Modal
        function createTaskRegistrationModal() {
            return `
                <div class="modal-content">
                    <span class="close" onclick="closeAllModals()">&times;</span>
                    <h2>Join TASK Team</h2>
                    <p>Declare the values or services you're offering to the TAU Africa community</p>
                    
                    <div class="payment-info">
                        <h3>Registration Fee: KSH 500</h3>
                        <p>Secure M-PESA payment required • One-time membership fee</p>
                    </div>
                    
                    <form onsubmit="processTaskRegistration(event)" id="taskForm">
                        <div class="form-group">
                            <label>Full Name *</label>
                            <input type="text" name="fullName" required placeholder="Enter your full legal name">
                        </div>
                        
                        <div class="form-group">
                            <label>Email Address *</label>
                            <input type="email" name="email" required placeholder="your.email@example.com">
                        </div>
                        
                        <div class="form-group">
                            <label>Phone Number (M-PESA) *</label>
                            <input type="tel" name="phone" required placeholder="254XXXXXXXXX" pattern="254[0-9]{9}">
                            <small>Format: 254XXXXXXXXX (include country code)</small>
                        </div>
                        
                        <div class="form-group">
                            <label>Country/Location *</label>
                            <input type="text" name="location" required placeholder="City, Country">
                        </div>

                        <div class="form-group">
                            <label>Date of Birth *</label>
                            <input type="date" name="dateOfBirth" required>
                        </div>

                        <div class="form-group">
                            <label>Gender *</label>
                            <select name="gender" required>
                                <option value="">Select gender</option>
                                <option value="Male">Male</option>
                                <option value="Female">Female</option>
                                <option value="Other">Other</option>
                                <option value="Prefer not to say">Prefer not to say</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label>Value Category *</label>
                            <div class="level-selection">
                                <div class="level-btn" onclick="selectCategory('skills')">Skills & Crafts</div>
                                <div class="level-btn" onclick="selectCategory('knowledge')">Knowledge & Expertise</div>
                                <div class="level-btn" onclick="selectCategory('service')">Professional Service</div>
                                <div class="level-btn" onclick="selectCategory('profession')">Licensed Profession</div>
                                <div class="level-btn" onclick="selectCategory('creativity')">Creative Arts</div>
                                <div class="level-btn" onclick="selectCategory('leadership')">Leadership & Management</div>
                            </div>
                            <input type="hidden" name="category" id="taskCategory" required>
                        </div>
                        
                        <div class="form-group">
                            <label>Describe Your Value/Service *</label>
                            <textarea name="valueDescription" rows="4" placeholder="Provide a detailed description of what you offer" required></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label>Experience Level *</label>
                            <select name="experience" required>
                                <option value="">Select level</option>
                                <option value="Beginner">Beginner (0-2 years)</option>
                                <option value="Intermediate">Intermediate (2-5 years)</option>
                                <option value="Advanced">Advanced (5-10 years)</option>
                                <option value="Expert">Expert (10+ years)</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label>Languages Spoken *</label>
                            <input type="text" name="languages" required placeholder="e.g., English, Swahili, French">
                        </div>
                        
                        <div class="form-group">
                            <label>Certificate of Good Conduct Status *</label>
                            <select name="goodConduct" required>
                                <option value="">Select status</option>
                                <option value="Available">Available - Can provide immediately</option>
                                <option value="Will obtain">Will obtain upon request</option>
                                <option value="In process">Currently in process of obtaining</option>
                                <option value="Not applicable">Not applicable in my country</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label>Emergency Contact *</label>
                            <input type="text" name="emergencyContact" required placeholder="Name and phone number">
                        </div>

                        <div class="form-group">
                            <label>
                                <input type="checkbox" name="terms" required style="width: auto; margin-right: 10px;">
                                I agree to the TAU Africa Terms of Service and Privacy Policy *
                            </label>
                        </div>
                        
                        <button type="submit" class="btn btn-register">Proceed to M-PESA Payment (KSH 500)</button>
                    </form>
                </div>
            `;
        }

        // Process TASK registration
        function processTaskRegistration(event) {
            event.preventDefault();
            const form = event.target;
            const formData = new FormData(form);
            const data = Object.fromEntries(formData.entries());
            
            if (!selectedCategory) {
                showNotification('Please select a value category', 'error');
                return;
            }
            
            data.category = selectedCategory;
            
            if (!data.terms) {
                showNotification('Please accept the terms and conditions', 'error');
                return;
            }

            form.classList.add('loading');
            initiateMpesaPayment(500, data.phone, data, 'processTaskSuccess');
        }

        function processTaskSuccess(formData) {
            const emailContent = `
TASK TEAM REGISTRATION - TAU AFRICA INTERNATIONAL
===============================================

PERSONAL INFORMATION:
• Full Name: ${formData.fullName}
• Email: ${formData.email}
• Phone: ${formData.phone}
• Location: ${formData.location}
• Date of Birth: ${formData.dateOfBirth}
• Gender: ${formData.gender}

VALUE DECLARATION:
• Category: ${formData.category}
• Description: ${formData.valueDescription}
• Experience Level: ${formData.experience}
• Languages: ${formData.languages}

VERIFICATION STATUS:
• Good Conduct Certificate: ${formData.goodConduct}
• Emergency Contact: ${formData.emergencyContact}

PAYMENT CONFIRMED:
• Amount: KSH 500
• Transaction ID: MPX${Date.now()}
• Date: ${new Date().toLocaleString()}

Welcome to TAU Africa TASK Team!
            `;
            
            sendEmailToOrganization(emailContent, "TASK TEAM REGISTRATION - New Member Confirmed", formData);
            showNotification('TASK registration completed successfully! Welcome to TAU Africa! Check your email for next steps.', 'success');
            closeAllModals();
        }

        // TALK Registration Modal (simplified)
        function createTalkRegistrationModal() {
            return `
                <div class="modal-content">
                    <span class="close" onclick="closeAllModals()">&times;</span>
                    <h2>Join TALK Team</h2>
                    <p>Declare financial support for African development</p>
                    
                    <div class="payment-info">
                        <h3>Registration Fee: KSH 2,000</h3>
                        <p>Secure M-PESA payment • Deposit goes to Valenta Liquid Pool Reserve</p>
                    </div>
                    
                    <form onsubmit="processTalkRegistration(event)" id="talkForm">
                        <div class="form-group">
                            <label>Full Name/Organization Name *</label>
                            <input type="text" name="fullName" required>
                        </div>
                        
                        <div class="form-group">
                            <label>Email Address *</label>
                            <input type="email" name="email" required>
                        </div>
                        
                        <div class="form-group">
                            <label>Phone Number (M-PESA) *</label>
                            <input type="tel" name="phone" required placeholder="254XXXXXXXXX">
                        </div>
                        
                        <div class="form-group">
                            <label>Country/Location *</label>
                            <input type="text" name="location" required>
                        </div>

                        <div class="form-group">
                            <label>Organization Type *</label>
                            <select name="organizationType" required>
                                <option value="">Select type</option>
                                <option value="Individual Investor">Individual Investor</option>
                                <option value="Corporation">Corporation</option>
                                <option value="Foundation">Foundation/NGO</option>
                                <option value="Government Agency">Government Agency</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label>Financial Support Level *</label>
                            <div class="level-selection">
                                <div class="level-btn" onclick="selectLevel('ground')">Ground Level (&lt; $1,000)</div>
                                <div class="level-btn" onclick="selectLevel('middle')">Middle Level ($1,000-$5,000)</div>
                                <div class="level-btn" onclick="selectLevel('upper')">Upper Level ($5,000+)</div>
                            </div>
                            <input type="hidden" name="supportLevel" id="supportLevel" required>
                        </div>
                        
                        <div class="form-group">
                            <label>Focus Areas/Industries *</label>
                            <textarea name="focusAreas" rows="3" placeholder="What sectors do you want to support?" required></textarea>
                        </div>

                        <div class="form-group">
                            <label>
                                <input type="checkbox" name="terms" required style="width: auto; margin-right: 10px;">
                                I agree to the TAU Africa Terms of Service and Privacy Policy *
                            </label>
                        </div>
                        
                        <button type="submit" class="btn btn-register">Proceed to M-PESA Payment (KSH 2,000)</button>
                    </form>
                </div>
            `;
        }

        function processTalkRegistration(event) {
            event.preventDefault();
            const form = event.target;
            const formData = new FormData(form);
            const data = Object.fromEntries(formData.entries());
            
            if (!selectedLevel) {
                showNotification('Please select a financial support level', 'error');
                return;
            }
            
            data.supportLevel = selectedLevel;
            
            if (!data.terms) {
                showNotification('Please accept the terms and conditions', 'error');
                return;
            }

            form.classList.add('loading');
            initiateMpesaPayment(2000, data.phone, data, 'processTalkSuccess');
        }

        function processTalkSuccess(formData) {
            const emailContent = `
TALK TEAM REGISTRATION - TAU AFRICA INTERNATIONAL
===============================================

ORGANIZATION INFORMATION:
• Name: ${formData.fullName}
• Email: ${formData.email}
• Phone: ${formData.phone}
• Location: ${formData.location}
• Organization Type: ${formData.organizationType}

FINANCIAL SUPPORT:
• Support Level: ${formData.supportLevel}
• Focus Areas: ${formData.focusAreas}

PAYMENT CONFIRMED:
• Amount: KSH 2,000
• Transaction ID: MPX${Date.now()}
• Date: ${new Date().toLocaleString()}

Welcome to TAU Africa TALK Team!
            `;
            
            sendEmailToOrganization(emailContent, "TALK TEAM REGISTRATION - New Investor Confirmed", formData);
            showNotification('TALK registration completed successfully! Welcome to the TAU Africa investor network!', 'success');
            closeAllModals();
        }

        // Job Creation Training Modal
        function createJobCreationModal() {
            return `
                <div class="modal-content">
                    <span class="close" onclick="closeAllModals()">&times;</span>
                    <h2>Job Creation Training Program</h2>
                    <p>Comprehensive entrepreneurship training for African innovators</p>
                    
                    <div class="payment-info">
                        <h3>Training Fee: KSH 1,500</h3>
                        <p>6-week program • Digital materials • Certification</p>
                    </div>
                    
                    <form onsubmit="processJobCreationTraining(event)">
                        <div class="form-group">
                            <label>Full Name *</label>
                            <input type="text" name="fullName" required>
                        </div>
                        
                        <div class="form-group">
                            <label>Email *</label>
                            <input type="email" name="email" required>
                        </div>
                        
                        <div class="form-group">
                            <label>Phone Number (M-PESA) *</label>
                            <input type="tel" name="phone" required placeholder="254XXXXXXXXX">
                        </div>
                        
                        <div class="form-group">
                            <label>Location *</label>
                            <input type="text" name="location" required>
                        </div>

                        <div class="form-group">
                            <label>Business Idea *</label>
                            <textarea name="businessIdea" rows="3" placeholder="What type of business are you interested in?" required></textarea>
                        </div>

                        <div class="form-group">
                            <label>
                                <input type="checkbox" name="terms" required style="width: auto; margin-right: 10px;">
                                I agree to the terms and conditions *
                            </label>
                        </div>
                        
                        <button type="submit" class="btn btn-register">Proceed to M-PESA Payment (KSH 1,500)</button>
                    </form>
                </div>
            `;
        }

        function processJobCreationTraining(event) {
            event.preventDefault();
            const form = event.target;
            const formData = new FormData(form);
            const data = Object.fromEntries(formData.entries());
            
            if (!data.terms) {
                showNotification('Please accept the terms and conditions', 'error');
                return;
            }

            form.classList.add('loading');
            initiateMpesaPayment(1500, data.phone, data, 'processJobCreationSuccess');
        }

        function processJobCreationSuccess(formData) {
            const emailContent = `
JOB CREATION TRAINING ENROLLMENT - TAU AFRICA
============================================

PARTICIPANT: ${formData.fullName}
EMAIL: ${formData.email}
PHONE: ${formData.phone}
LOCATION: ${formData.location}

BUSINESS IDEA: ${formData.businessIdea}

PAYMENT CONFIRMED:
• Training Fee: KSH 1,500
• Transaction ID: MPX${Date.now()}
• Date: ${new Date().toLocaleString()}

Program starts next Monday!
            `;
            
            sendEmailToOrganization(emailContent, "JOB CREATION TRAINING - New Enrollment", formData);
            showNotification('Training enrollment successful! You will receive program details within 24 hours.', 'success');
            closeAllModals();
        }

        // All other modal functions (simplified for space)
        function createCorporateModal() {
            return `<div class="modal-content"><span class="close" onclick="closeAllModals()">&times;</span><h2>Corporate Registration</h2><p>Feature under development. Contact grouptauafrica@gmail.com for corporate services.</p></div>`;
        }

        function createTrainingModal() {
            return `<div class="modal-content"><span class="close" onclick="closeAllModals()">&times;</span><h2>Training Programs</h2><p>Feature under development. Contact grouptauafrica@gmail.com for training opportunities.</p></div>`;
        }

        function createWorkshopModal() {
            return `<div class="modal-content"><span class="close" onclick="closeAllModals()">&times;</span><h2>Host Workshop</h2><p>Feature under development. Contact grouptauafrica@gmail.com to host workshops.</p></div>`;
        }

        function createResearchModal() {
            return `<div class="modal-content"><span class="close" onclick="closeAllModals()">&times;</span><h2>Research Services</h2><p>Feature under development. Contact grouptauafrica@gmail.com for research services.</p></div>`;
        }

        function createInsertJobModal() {
            return `<div class="modal-content"><span class="close" onclick="closeAllModals()">&times;</span><h2>Post Job</h2><p>Feature under development. Contact grouptauafrica@gmail.com to post jobs.</p></div>`;
        }

        function createRetrieveJobModal() {
            return `<div class="modal-content"><span class="close" onclick="closeAllModals()">&times;</span><h2>Search Jobs</h2><p>Feature under development. Contact grouptauafrica@gmail.com for job search.</p></div>`;
        }

        function createAvailableJobsModal() {
            return `<div class="modal-content"><span class="close" onclick="closeAllModals()">&times;</span><h2>Available Jobs</h2><p>Feature under development. Jobs will be listed here soon.</p></div>`;
        }

        function createApplyJobModal() {
            return `<div class="modal-content"><span class="close" onclick="closeAllModals()">&times;</span><h2>Apply for Job</h2><p>Feature under development. Contact grouptauafrica@gmail.com to apply.</p></div>`;
        }

        function createCommunityModal() {
            return `<div class="modal-content"><span class="close" onclick="closeAllModals()">&times;</span><h2>Community Programs</h2><p>Feature under development. Contact grouptauafrica@gmail.com for community programs.</p></div>`;
        }

        function createParSiraiModal() {
            return `<div class="modal-content"><span class="close" onclick="closeAllModals()">&times;</span><h2>Par Sirai Center</h2><p>Spiritual and knowledge center under development.</p></div>`;
        }

        function createTrustGraphModal() {
            return `<div class="modal-content"><span class="close" onclick="closeAllModals()">&times;</span><h2>Trust Graph Ledger</h2><p>Blockchain system under development. Launch expected Q1 2025.</p></div>`;
        }

        function createFoundationModal() {
            return `<div class="modal-content"><span class="close" onclick="closeAllModals()">&times;</span><h2>TAU Africa Foundation</h2><p>Foundation services under development.</p></div>`;
        }

        function createHoldingsModal() {
            return `<div class="modal-content"><span class="close" onclick="closeAllModals()">&times;</span><h2>Valenta Holdings</h2><p>Investment portfolio under development.</p></div>`;
        }

        function createForumModal() {
            return `<div class="modal-content"><span class="close" onclick="closeAllModals()">&times;</span><h2>Member Forum</h2><p>Community forum launching soon with full features!</p></div>`;
        }

        // Member login functions
        function showMemberLogin() {
            const modal = document.createElement('div');
            modal.className = 'modal';
            modal.style.display = 'block';
            modal.innerHTML = `
                <div class="modal-content">
                    <span class="close" onclick="this.parentElement.parentElement.remove()">&times;</span>
                    <h2>Member Login</h2>
                    <p>Access your TAU Africa member dashboard</p>
                    
                    <form onsubmit="simulateLogin(event)">
                        <div class="form-group">
                            <label>Email or Member ID</label>
                            <input type="text" name="loginId" required>
                        </div>
                        <div class="form-group">
                            <label>Password</label>
                            <input type="password" name="password" required>
                        </div>
                        <button type="submit" class="btn">Login to Dashboard</button>
                        
                        <div style="text-align: center; margin-top: 20px;">
                            <p>New member? Complete registration through TASK or TALK teams first!</p>
                        </div>
                    </form>
                </div>
            `;
            document.body.appendChild(modal);
        }

        function simulateLogin(event) {
            event.preventDefault();
            showNotification('Login successful! Loading dashboard...', 'success');
            setTimeout(() => {
                closeAllModals();
                showNotification('Dashboard feature under development. Complete registration first!', 'success');
            }, 1500);
        }

        // AI Assistant Functions
        function toggleAIChat() {
            const chatWindow = document.getElementById('aiChatWindow');
            if (chatWindow.style.display === 'none' || !chatWindow.style.display) {
                chatWindow.style.display = 'flex';
            } else {
                chatWindow.style.display = 'none';
            }
        }

        function handleAIChatKeyPress(event) {
            if (event.key === 'Enter') {
                sendAIMessage();
            }
        }

        function sendAIMessage() {
            const input = document.getElementById('aiChatInput');
            const message = input.value.trim();
            
            if (!message) return;
            
            const messagesContainer = document.getElementById('aiChatMessages');
            
            // Add user message
            const userMessage = document.createElement('div');
            userMessage.className = 'ai-message user-message';
            userMessage.textContent = message;
            messagesContainer.appendChild(userMessage);
            
            // Clear input
            input.value = '';
            
            // Generate AI response
            setTimeout(() => {
                const aiResponse = generateAIResponse(message);
                const aiMessage = document.createElement('div');
                aiMessage.className = 'ai-message';
                aiMessage.innerHTML = aiResponse;
                messagesContainer.appendChild(aiMessage);
                messagesContainer.scrollTop = messagesContainer.scrollHeight;
            }, 1000);
            
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function generateAIResponse(userMessage) {
            const message = userMessage.toLowerCase();
            
            if (message.includes('register') || message.includes('join')) {
                return `To register with TAU Africa, choose between:<br>
                • <strong>TASK Team (KSH 500)</strong> - For service providers<br>
                • <strong>TALK Team (KSH 2,000)</strong> - For investors<br>
                • <strong>Job Creation Training (KSH 1,500)</strong> - For entrepreneurs<br>
                <br>Click the relevant buttons to get started!`;
            }
            
            if (message.includes('payment') || message.includes('mpesa')) {
                return `Our payment process uses M-PESA:<br>
                1. Enter your M-PESA number (254XXXXXXXXX format)<br>
                2. You'll receive a payment prompt on your phone<br>
                3. Enter your M-PESA PIN to confirm<br>
                4. Wait for confirmation<br>
                <br>All payments are secure and processed instantly!`;
            }
            
            if (message.includes('kabiru') || message.includes('mining')) {
                return `Kabiru is our digital currency! You can:<br>
                • Mine Kabiru by validating real values<br>
                • Use the mining portal: <a href="https://magero1985.github.io/Kabiru-Mining-Portal-/" target="_blank">Access Mining App</a><br>
                • Earn through community contributions`;
            }
            
            // Default response
            return `Thank you for your question! I can help with:<br>
            • Registration and membership information<br>
            • Payment and M-PESA guidance<br>
            • Kabiru mining and digital currency<br>
            • Community programs<br>
            <br>Contact <strong>grouptauafrica@gmail.com</strong> for detailed support.`;
        }

        // Event listeners
        document.addEventListener('click', function(event) {
            if (event.target.classList.contains('modal')) {
                closeAllModals();
            }
        });

        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeAllModals();
                document.getElementById('aiChatWindow').style.display = 'none';
            }
        });

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            console.log('TAU AFRICA INTERNATIONAL - APPLICATION INITIALIZED');
            showNotification('Welcome to TAU Africa International! System ready for registration.', 'success');
        });
    </script>
</body>
</html>
